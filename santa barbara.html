<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>My map</title>
<script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
<style></style>
</head>
<body>
    <div id="container" class="svg-container"></div>
    <script type="text/javascript">
      width = 800,
      height = 1000;

      var svg = d3
        .select(".svg-container")
        .append("svg")
        // set to the same size as the "map-holder" div
        .attr("width", width)
        .attr("height", height)
;

  var projection = d3
   .geoEquirectangular()
   .center([-119.5, 34.4]) // set centre to further North
   .scale(50000) // scale to fit group width
   .translate([width/2,height/2]) // ensure centred in group
;


var path = d3
   .geoPath()
   .projection(projection)
;

var countriesGroup = svg
   .append("g")
   .attr("id", "map")
;
countriesGroup
   .append("rect")
   .attr("x", 0)
   .attr("y", 0)
   .style('fill', 'white')
   .attr("width", width)
   .attr("height", height)
;


  var data = d3.json("yelp_filtered_to_santa_barbara.json").then( function(data){
    console.log(data[0].stars);
    countriesGroup.selectAll("circle")
                .data(data)
                .enter()
                .append("circle")
                .style('fill', 'orange')
                .attr("x", function(data) {
                    console.log(data.longitude)
                    return data.longitude;})
                .attr("y", function(data) {
                    console.log(data.latitude)
                    return data.latitude;})
                .attr('r', function(data) {
                  console.log(data.stars)
                  return data.stars;})
                  .attr("transform", function(d) {return "translate(" + projection([d.longitude,d.latitude]) + ")";});
      }).catch(function(){ console.log("error")});

    // working print all stuff
    // var data = d3.json("yelp_filtered_to_santa_barbara.json").then( function(data){
    //     d3.select("body")
    //             .selectAll("span")
    //             .data(data)
    //             .enter()
    //             .append("span")
    //             .text(function(d) { 
    //               // console.log(d);
    //               return d.name + "\n "; })
    //             })
    // .catch(function(){ console.log("error")});

    // var data = [4, 1, 6, 2, 8, 9];
    // var path = d3.geoPath().projection(projection);

  // load data  

</script>
</body>
</html>